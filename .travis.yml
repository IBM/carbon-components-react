language: node_js

node_js:
  - '9'

cache:
  yarn: true
  directories:
    - node_modules

notifications:
  email: false

script:
  - yarn ci-check

after_success:
  - yarn semantic-release

before_deploy:
  - yarn build-storybook

deploy:
  skip_cleanup: true
  provider: cloudfoundry
  username: apikey
  password: $CLOUD_API_KEY
  api: https://api.ng.bluemix.net
  organization: carbon-design-system
  space: production
  on:
    branch: feat/continuous-delivery-storybook
    # branch: master
